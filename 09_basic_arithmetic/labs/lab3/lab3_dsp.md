# Лабораторная работа 3. DSP-ячейки


## Воспроизведите примеры "Умножение без DSP" и "Умножение с DSP"

### 1.  Проведите синтез обоих примеров и сравните Utilization. Почему пример "без DSP" использует LUT, а пример "с DSP" не использует их? Откройте Synthesis > Schematic для обоих примеров и объясните увиденное


#### без DSP:


Slice Logic
--------------

|        Site Type        | Used | Fixed | Prohibited | Available | Util% |
|-------------------------|------|-------|------------|-----------|-------|
| Slice LUTs*             |  465 |     0 |          0 |     63400 |  0.73 |
|   LUT as Logic          |  465 |     0 |          0 |     63400 |  0.73 |
|   LUT as Memory         |    0 |     0 |          0 |     19000 |  0.00 |
| Slice Registers         |   86 |     0 |          0 |    126800 |  0.07 |
|   Register as Flip Flop |   86 |     0 |          0 |    126800 |  0.07 |
|   Register as Latch     |    0 |     0 |          0 |    126800 |  0.00 |
| F7 Muxes                |    0 |     0 |          0 |     31700 |  0.00 |
| F8 Muxes                |    0 |     0 |          0 |     15850 |  0.00 |


DSP
------

| Site Type | Used | Fixed | Prohibited | Available | Util% |
|-----------|------|-------|------------|-----------|-------|
| DSPs      |    0 |     0 |          0 |       240 |  0.00 |


![страшно](../../pic/DSP/no_dsp.png)

------------
#### Используя DSP:


 Slice Logic
--------------


|        Site Type        | Used | Fixed | Prohibited | Available | Util% |
|-------------------------|------|-------|------------|-----------|-------|
| Slice LUTs*             |    0 |     0 |          0 |     63400 |  0.00 |
|   LUT as Logic          |    0 |     0 |          0 |     63400 |  0.00 |
|   LUT as Memory         |    0 |     0 |          0 |     19000 |  0.00 |
| Slice Registers         |    0 |     0 |          0 |    126800 |  0.00 |
|   Register as Flip Flop |    0 |     0 |          0 |    126800 |  0.00 |
|   Register as Latch     |    0 |     0 |          0 |    126800 |  0.00 |
| F7 Muxes                |    0 |     0 |          0 |     31700 |  0.00 |
| F8 Muxes                |    0 |     0 |          0 |     15850 |  0.00 |


 DSP
------

|    Site Type   | Used | Fixed | Prohibited | Available | Util% |
|----------------|------|-------|------------|-----------|-------|
| DSPs           |    1 |     0 |          0 |       240 |  0.42 |
|   DSP48E1 only |    1 |       |            |           |       |


![приемлемо](../../pic/DSP/dsp_mull.png)

> обьяснение: отключая возможность синтезатору использовать встроенные блоки DSP мы обрекаем его на синтез того же самого используя статическую логику лутов. Схемы выглядит громозко т.к. в ней просто много умножителей, соответвенно схема использующая DSP просто использует один блок т.к. туда влезает умножение 25*18 и шины для ее подключения.

> ИТОГО : использовать DSP выгодно по нескольким причинам 1. быстрый синтез(особенно в больших проектах) 2. скорость 3. то, что логика умножения не занимает луты

### 2. Увеличьте разрядность одного или сразу двух входов в примере "Умножение с DSP". Откройте Synthesis > Schematic и объясните увиденное.


![после увеличения разрядности в два раза](../../pic/DSP/up_bitnes.png)

> просто стало использоваться несколько dsp блоков в моем случае 6


### 3. Почему в примере "Умножение с DSP" на схеме Synthesis > Schematic отсутствуют регистры? Куда они пропали и где находятся?

> они внутри dsp т.к.

![dsp](../../pic/DSP/dsp_sch.png)

### 4. В примере "Умножение с DSP" поменяйте тип сброса на асинхронный. Что случилось с регистрами на схеме Synthesis > Schematic? Почему?

> синтезатору пришлось вынести регистры из DCP т.к. он поддерживает только регистры с синхронным сбросом


![async rst reg](../../pic/DSP/DSP_async_reg.png)

#### 5. Подключите файл clk.xdc к проектам с примерами "Умножение без DSP" и "Умножение с DSP" и выполните сравнительный анализ тактовой частоты. Внимание! Для примера "Умножение с DSP" используйте top-level модуль-обёртку mult_dsp_wrapper.sv. Какие получились тактовые частоты у разных примеров? Почему они отличаются?
